---
title: "store_session"
description: "Store AI conversation sessions as organized markdown files in topic-named folders"
---

Store AI conversation sessions as organized markdown files in `.codearchitect/sessions/`. Creates a topic-named folder with `summary.md` and `full.md` files for better organization.

## Parameters

<ParamField body="conversation" type="string | Message[]" required>
Conversation text or JSON array of messages. Required.
</ParamField>

<ParamField body="topic" type="string">
Optional session topic. Auto-extracted if not provided.
</ParamField>

<ParamField body="format" type="string" default="plain">
`"plain"` for text, `"messages"` for JSON array. Default: `"plain"`.
</ParamField>

<ParamField body="sessionsDir" type="string">
Optional custom directory. Overrides `CODEARCHITECT_SESSIONS_DIR` env var.
</ParamField>

## Response

### Success

<ResponseField name="success" type="boolean" required>
Always `true`.
</ResponseField>

<ResponseField name="summaryFile" type="string" required>
Full path to `summary.md` file in topic folder.
</ResponseField>

<ResponseField name="fullFile" type="string" required>
Full path to `full.md` file in topic folder.
</ResponseField>

<ResponseField name="filename" type="string" required>
Topic folder name (e.g., `authentication-implementation`).
</ResponseField>

<ResponseField name="topic" type="string" required>
Final topic used.
</ResponseField>

<ResponseField name="date" type="string" required>
ISO date string.
</ResponseField>

<ResponseField name="message" type="string" required>
Success message indicating folder location.
</ResponseField>

### Error

<ResponseField name="success" type="boolean" required>
Always `false`.
</ResponseField>

<ResponseField name="error" type="string" required>
Error code (see below).
</ResponseField>

<ResponseField name="message" type="string" required>
Human-readable error message.
</ResponseField>

## Error Codes

| Code | Description |
|------|-------------|
| `INVALID_INPUT` | Missing or invalid conversation |
| `FILE_WRITE_ERROR` | Cannot write file |
| `DIRECTORY_CREATION_ERROR` | Cannot create directory |
| `UNKNOWN_ERROR` | Unexpected error |

## Example

<RequestExample>
```json
{
  "name": "store_session",
  "arguments": {
    "conversation": "User: Implement authentication\nAI: Let's use JWT...",
    "topic": "Authentication Implementation"
  }
}
```
</RequestExample>

<ResponseExample>
```json Success
{
  "success": true,
  "summaryFile": "/path/.codearchitect/sessions/2025-11-18/authentication-implementation/summary.md",
  "fullFile": "/path/.codearchitect/sessions/2025-11-18/authentication-implementation/full.md",
  "filename": "authentication-implementation",
  "topic": "authentication-implementation",
  "date": "2025-11-18T14:30:22.123Z",
  "message": "Session saved in folder authentication-implementation: summary.md and full.md"
}
```
</ResponseExample>

## Storage Structure

Sessions are stored in topic-named folders with two files:

```
.codearchitect/sessions/
└── YYYY-MM-DD/
    └── topic-folder-name/
        ├── summary.md    # Short summary + detailed request/response pairs
        └── full.md       # Complete JSON messages + human-readable format
```

**Folder naming:**
- Topic-based folder names (e.g., `authentication-implementation`)
- Redundant suffixes automatically removed (`-summary`, `-session`, `-conversation`, `-chat`)
- Auto-numbered if folder name collision occurs

**Files:**
- `summary.md`: Quick summary with key points and detailed request/response pairs
- `full.md`: Complete conversation as JSON (TOON-optimized) + human-readable format

## Limits

- **Conversation size**: Max 10MB (truncated to 1MB)
- **Topic length**: Max 100 chars (folder name sanitized)
- **Folder collisions**: Auto-numbered up to 1000 attempts

## Storage Priority

1. Tool parameter (`sessionsDir`)
2. Environment variable (`CODEARCHITECT_SESSIONS_DIR`)
3. Default (`.codearchitect/sessions/` in project root)
